<div class="card p-3 mb-4">
  <h5 class="mb-3">Transactions</h5>
  <div style="max-height: 300px; overflow-y: auto;" class="table-responsive">
    <table class="table table-sm table-bordered table-hover mb-0 text-center align-middle">
      <thead class="table-dark">
        <tr>
          <th>Stock</th>
          <th>Type</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Total</th>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% if @transactions.present? %>
          <% @transactions.each do |tx| %>
            <tr>
              <td><%= tx.asset_symbol %></td>
              <td>
                <% if tx.transaction_type == "buy" %>
                  <span class="badge text-bg-success">Buy</span>
                <% else %>
                  <span class="badge text-bg-danger">Sell</span>
                <% end %>
              </td>
              <td><%= tx.quantity %></td>
              <td><%= number_to_currency(tx.price) %></td>
              <td>
                <% sign = tx.buy? ? "-" : "+" %>
                <span class="<%= tx.buy? ? 'text-danger' : 'text-success' %>">
                  <%= sign %><%= number_to_currency(tx.total_amount) %>
                </span>
              </td>
              <td><%= tx.created_at.in_time_zone("Asia/Manila").strftime("%b %d, %Y") %></td>
              <td>
                <%= link_to 'View', trader_transaction_path(tx), class: "btn btn-outline-secondary btn-sm" %>
              </td>
            </tr>
          <% end %>
        <% else %>
          <tr>
            <td colspan="6">No transactions found.</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>